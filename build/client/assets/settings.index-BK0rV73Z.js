import{r as p,j as e}from"./jsx-runtime-DEmlPpso.js";import{z as y}from"./index-BgCZZJbK.js";import{a as x,g as R,B as f}from"./button-CpUPrY_9.js";import{I as C}from"./input-NQ8s9Axg.js";import{R as A,I as P}from"./upload-image-CT9KJohk.js";import{I as m}from"./misc-CKFZHWnt.js";import{u as D,a as B,b as j,F as v}from"./components-uhwHQdEV.js";import{u as N,g as O,p as w,a as T,b as S}from"./parse-B9t2GImk.js";import{c as z}from"./createLucideIcon-CnhbPzUc.js";import"./index-DjyjHE6D.js";/**
 * @license lucide-react v0.429.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),L="/resources/reset-image";function H(){const[r,a]=p.useState(!1);function o(t){const l=()=>a(!1),n=r?void 0:i=>{i.preventDefault(),a(!0)},u=i=>{i.key==="Escape"&&a(!1)};return{...t,onBlur:x(l,t?.onBlur),onClick:x(n,t?.onClick),onKeyUp:x(u,t?.onKeyUp)}}return{doubleCheck:r,getButtonProps:o}}const k=y.object({username:y.string().min(3).max(20).toLowerCase().trim().regex(/^[a-zA-Z0-9]+$/,"Username may only contain alphanumeric characters.")});function Q(){const{user:r}=D(),a=B(),[o,t]=p.useState(null),l=p.useRef(null),n=j(),u=j(),{doubleCheck:i,getButtonProps:F}=H(),[U,{username:d}]=N({lastResult:a,constraint:O(k),onValidate({formData:s}){return w(s,{schema:k})}}),[I,c]=N({lastResult:n.data,onValidate({formData:s}){return w(s,{schema:P})}});return e.jsxs("div",{className:"flex h-full w-full flex-col gap-6",children:[e.jsxs(n.Form,{method:"POST",action:A,encType:"multipart/form-data",ref:l,onReset:()=>t(null),...T(I),className:"flex w-full flex-col items-start rounded-lg border border-border bg-card",children:[e.jsxs("div",{className:"flex w-full items-start justify-between rounded-lg p-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h2",{className:"text-xl font-medium text-primary",children:"Your Avatar"}),e.jsx("p",{className:"text-sm font-normal text-primary/60",children:"This is your avatar. It will be displayed on your profile."})]}),e.jsxs("label",{htmlFor:c.imageFile.id,className:"group relative flex cursor-pointer overflow-hidden rounded-full transition active:scale-95",children:[o||r.image?.id?e.jsx("img",{src:o??R(r.image?.id),className:"h-20 w-20 rounded-full object-cover",alt:r.username??r.email}):e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-lime-400 from-10% via-cyan-300 to-blue-500"}),e.jsx("div",{className:"absolute z-10 hidden h-full w-full items-center justify-center bg-primary/40 group-hover:flex",children:e.jsx(_,{className:"h-6 w-6 text-secondary"})})]}),e.jsx("input",{...S(c.imageFile,{type:"file"}),accept:"image/*",className:"peer sr-only",required:!0,tabIndex:o?-1:0,onChange:s=>{const h=s.currentTarget.files?.[0];if(h){const g=s.currentTarget.form;if(!g)return;const b=new FileReader;b.onload=E=>{t(E.target?.result?.toString()??null),n.submit(g)},b.readAsDataURL(h)}}})]}),e.jsxs("div",{className:"flex min-h-14 w-full items-center justify-between rounded-lg rounded-t-none border-t border-border bg-secondary px-6 dark:bg-card",children:[e.jsx("p",{className:"text-sm font-normal text-primary/60",children:"Click on the avatar to upload a custom one from your files."}),r.image?.id&&!c.imageFile.errors&&e.jsx(f,{type:"button",size:"sm",variant:"secondary",onClick:()=>{u.submit({},{method:"POST",action:L}),l.current&&l.current.reset()},children:"Reset"}),c.imageFile.errors&&e.jsx("p",{className:"text-right text-sm text-destructive dark:text-destructive-foreground",children:c.imageFile.errors.join(" ")})]})]}),e.jsxs(v,{method:"POST",className:"flex w-full flex-col items-start rounded-lg border border-border bg-card",...T(U),children:[e.jsxs("div",{className:"flex w-full flex-col gap-4 rounded-lg p-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h2",{className:"text-xl font-medium text-primary",children:"Your Username"}),e.jsx("p",{className:"text-sm font-normal text-primary/60",children:"This is your username. It will be displayed on your profile."})]}),e.jsx(C,{placeholder:"Username",autoComplete:"off",defaultValue:r?.username??"",required:!0,className:`w-80 bg-transparent ${d.errors&&"border-destructive focus-visible:ring-destructive"}`,...S(d,{type:"text"})}),d.errors&&e.jsx("p",{className:"text-sm text-destructive dark:text-destructive-foreground",children:d.errors.join(" ")})]}),e.jsxs("div",{className:"flex min-h-14 w-full items-center justify-between rounded-lg rounded-t-none border-t border-border bg-secondary px-6 dark:bg-card",children:[e.jsx("p",{className:"text-sm font-normal text-primary/60",children:"Please use 32 characters at maximum."}),e.jsx(f,{type:"submit",size:"sm",name:m.INTENT,value:m.USER_UPDATE_USERNAME,children:"Save"})]})]}),e.jsxs("div",{className:"flex w-full flex-col items-start rounded-lg border border-destructive bg-card",children:[e.jsxs("div",{className:"flex flex-col gap-2 p-6",children:[e.jsx("h2",{className:"text-xl font-medium text-primary",children:"Delete Account"}),e.jsx("p",{className:"text-sm font-normal text-primary/60",children:"Permanently delete your Remix SaaS account, all of your projects, links and their respective stats."})]}),e.jsxs("div",{className:"flex min-h-14 w-full items-center justify-between rounded-lg rounded-t-none border-t border-border bg-red-500/10 px-6 dark:bg-red-500/10",children:[e.jsx("p",{className:"text-sm font-normal text-primary/60",children:"This action cannot be undone, proceed with caution."}),e.jsx(v,{method:"POST",children:e.jsx(f,{type:"submit",size:"sm",variant:"destructive",name:m.INTENT,value:m.USER_DELETE_ACCOUNT,...F(),children:i?"Are you sure?":"Delete Account"})})]})]})]})}export{Q as default};
