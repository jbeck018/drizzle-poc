import{r as a,j as s}from"./jsx-runtime-DEmlPpso.js";import{e as z,f as Y,c as w,B as C}from"./button-CpUPrY_9.js";import{r as L,u as $,F as P}from"./components-uhwHQdEV.js";import{I as N}from"./misc-CKFZHWnt.js";function W(e,r,{checkForDefaultPrevented:t=!0}={}){return function(n){if(e?.(n),t===!1||!n.defaultPrevented)return r?.(n)}}function V(e,r=[]){let t=[];function o(c,i){const l=a.createContext(i),d=t.length;t=[...t,i];function u(p){const{scope:b,children:g,...x}=p,S=b?.[e][d]||l,y=a.useMemo(()=>x,Object.values(x));return s.jsx(S.Provider,{value:y,children:g})}function v(p,b){const g=b?.[e][d]||l,x=a.useContext(g);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${c}\``)}return u.displayName=c+"Provider",[u,v]}const n=()=>{const c=t.map(i=>a.createContext(i));return function(l){const d=l?.[e]||c;return a.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return n.scopeName=e,[o,q(n,...r)]}function q(...e){const r=e[0];if(e.length===1)return r;const t=()=>{const o=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(c){const i=o.reduce((l,{useScope:d,scopeName:u})=>{const p=d(c)[`__scope${u}`];return{...l,...p}},{});return a.useMemo(()=>({[`__scope${r.scopeName}`]:i}),[i])}};return t.scopeName=r.scopeName,t}var T=a.forwardRef((e,r)=>{const{children:t,...o}=e,n=a.Children.toArray(t),c=n.find(G);if(c){const i=c.props.children,l=n.map(d=>d===c?a.Children.count(i)>1?a.Children.only(null):a.isValidElement(i)?i.props.children:null:d);return s.jsx(j,{...o,ref:r,children:a.isValidElement(i)?a.cloneElement(i,void 0,l):null})}return s.jsx(j,{...o,ref:r,children:t})});T.displayName="Slot";var j=a.forwardRef((e,r)=>{const{children:t,...o}=e;if(a.isValidElement(t)){const n=Z(t);return a.cloneElement(t,{...X(o,t.props),ref:r?z(r,n):n})}return a.Children.count(t)>1?a.Children.only(null):null});j.displayName="SlotClone";var K=({children:e})=>s.jsx(s.Fragment,{children:e});function G(e){return a.isValidElement(e)&&e.type===K}function X(e,r){const t={...r};for(const o in r){const n=e[o],c=r[o];/^on[A-Z]/.test(o)?n&&c?t[o]=(...l)=>{c(...l),n(...l)}:n&&(t[o]=n):o==="style"?t[o]={...n,...c}:o==="className"&&(t[o]=[n,c].filter(Boolean).join(" "))}return{...e,...t}}function Z(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var J=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_=J.reduce((e,r)=>{const t=a.forwardRef((o,n)=>{const{asChild:c,...i}=o,l=c?T:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...i,ref:n})});return t.displayName=`Primitive.${r}`,{...e,[r]:t}},{});function fe(e,r){e&&L.flushSync(()=>e.dispatchEvent(r))}var Q=globalThis?.document?a.useLayoutEffect:()=>{};function ee(e){const[r,t]=a.useState(void 0);return Q(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const c=n[0];let i,l;if("borderBoxSize"in c){const d=c.borderBoxSize,u=Array.isArray(d)?d[0]:d;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;t({width:i,height:l})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else t(void 0)},[e]),r}function O(e){const r=a.useRef(e);return a.useEffect(()=>{r.current=e}),a.useMemo(()=>(...t)=>r.current?.(...t),[])}function te({prop:e,defaultProp:r,onChange:t=()=>{}}){const[o,n]=re({defaultProp:r,onChange:t}),c=e!==void 0,i=c?e:o,l=O(t),d=a.useCallback(u=>{if(c){const p=typeof u=="function"?u(e):u;p!==e&&l(p)}else n(u)},[c,e,n,l]);return[i,d]}function re({defaultProp:e,onChange:r}){const t=a.useState(e),[o]=t,n=a.useRef(o),c=O(r);return a.useEffect(()=>{n.current!==o&&(c(o),n.current=o)},[o,n,c]),t}function se(e){const r=a.useRef({value:e,previous:e});return a.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}const m={FREE:"free",PRO:"pro"},f={MONTH:"month",YEAR:"year"},h={DEFAULT:"usd",USD:"usd",EUR:"eur"},k={[m.FREE]:{id:m.FREE,name:"Free",description:"Start with the basics, upgrade anytime.",prices:{[f.MONTH]:{[h.USD]:0,[h.EUR]:0},[f.YEAR]:{[h.USD]:0,[h.EUR]:0}}},[m.PRO]:{id:m.PRO,name:"Pro",description:"Access to all features and unlimited projects.",prices:{[f.MONTH]:{[h.USD]:1990,[h.EUR]:1990},[f.YEAR]:{[h.USD]:19990,[h.EUR]:19990}}}};var R="Switch",[ne,me]=V(R),[oe,ie]=ne(R),A=a.forwardRef((e,r)=>{const{__scopeSwitch:t,name:o,checked:n,defaultChecked:c,required:i,disabled:l,value:d="on",onCheckedChange:u,...v}=e,[p,b]=a.useState(null),g=Y(r,E=>b(E)),x=a.useRef(!1),S=p?!!p.closest("form"):!0,[y=!1,F]=te({prop:n,defaultProp:c,onChange:u});return s.jsxs(oe,{scope:t,checked:y,disabled:l,children:[s.jsx(_.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":H(y),"data-disabled":l?"":void 0,disabled:l,value:d,...v,ref:g,onClick:W(e.onClick,E=>{F(B=>!B),S&&(x.current=E.isPropagationStopped(),x.current||E.stopPropagation())})}),S&&s.jsx(ae,{control:p,bubbles:!x.current,name:o,value:d,checked:y,required:i,disabled:l,style:{transform:"translateX(-100%)"}})]})});A.displayName=R;var U="SwitchThumb",M=a.forwardRef((e,r)=>{const{__scopeSwitch:t,...o}=e,n=ie(U,t);return s.jsx(_.span,{"data-state":H(n.checked),"data-disabled":n.disabled?"":void 0,...o,ref:r})});M.displayName=U;var ae=e=>{const{control:r,checked:t,bubbles:o=!0,...n}=e,c=a.useRef(null),i=se(t),l=ee(r);return a.useEffect(()=>{const d=c.current,u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==t&&p){const b=new Event("click",{bubbles:o});p.call(d,t),d.dispatchEvent(b)}},[i,t,o]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:c,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function H(e){return e?"checked":"unchecked"}var I=A,ce=M;const D=a.forwardRef(({className:e,...r},t)=>s.jsx(I,{className:w("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:t,children:s.jsx(ce,{className:w("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));D.displayName=I.displayName;const xe="/dashboard/settings/billing",he=()=>[{title:"Remix SaaS - Billing"}];function be(){const{subscription:e,currency:r}=$(),[t,o]=a.useState(e?.plan_id??m.FREE),[n,c]=a.useState(f.MONTH);return s.jsxs("div",{className:"flex h-full w-full flex-col gap-6",children:[s.jsxs("div",{className:"flex w-full flex-col gap-2 p-6 py-2",children:[s.jsx("h2",{className:"text-xl font-medium text-primary",children:"This is a demo app."}),s.jsxs("p",{className:"text-sm font-normal text-primary/60",children:["Remix SaaS is a demo app that uses Stripe test environment. You can find a list of test card numbers on the"," ",s.jsx("a",{href:"https://stripe.com/docs/testing#cards",target:"_blank",rel:"noreferrer",className:"font-medium text-primary/80 underline",children:"Stripe docs"}),"."]})]}),s.jsxs("div",{className:"flex w-full flex-col items-start rounded-lg border border-border bg-card",children:[s.jsxs("div",{className:"flex flex-col gap-2 p-6",children:[s.jsx("h2",{className:"text-xl font-medium text-primary",children:"Plan"}),s.jsxs("p",{className:"flex items-start gap-1 text-sm font-normal text-primary/60",children:["You are currently on the"," ",s.jsx("span",{className:"flex h-[18px] items-center rounded-md bg-primary/10 px-1.5 text-sm font-medium text-primary/80",children:e?e.plan_id?.charAt(0).toUpperCase()+e.plan_id.slice(1):"Free"}),"plan."]})]}),e?.plan_id===m.FREE&&s.jsx("div",{className:"flex w-full flex-col items-center justify-evenly gap-2 border-border p-6 pt-0",children:Object.values(k).map(i=>s.jsxs("div",{tabIndex:0,role:"button",className:`flex w-full select-none items-center rounded-md border border-border hover:border-primary/60 ${t===i.id&&"border-primary/60"}`,onClick:()=>o(i.id),onKeyDown:l=>{l.key==="Enter"&&o(i.id)},children:[s.jsxs("div",{className:"flex w-full flex-col items-start p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-base font-medium text-primary",children:i.name}),i.id!==m.FREE&&s.jsxs("span",{className:"flex items-center rounded-md bg-primary/10 px-1.5 text-sm font-medium text-primary/80",children:[r===h.USD?"$":"â‚¬"," ",n===f.MONTH?i.prices[f.MONTH][r]/100:i.prices[f.YEAR][r]/100," ","/ ",n===f.MONTH?"month":"year"]})]}),s.jsx("p",{className:"text-start text-sm font-normal text-primary/60",children:i.description})]}),i.id!==m.FREE&&s.jsxs("div",{className:"flex items-center gap-2 px-4",children:[s.jsx("label",{htmlFor:"interval-switch",className:"text-start text-sm text-primary/60",children:n===f.MONTH?"Monthly":"Yearly"}),s.jsx(D,{id:"interval-switch",checked:n===f.YEAR,onCheckedChange:()=>c(l=>l===f.MONTH?f.YEAR:f.MONTH)})]})]},i.id))}),e&&e.plan_id!==m.FREE&&s.jsx("div",{className:"flex w-full flex-col items-center justify-evenly gap-2 border-border p-6 pt-0",children:s.jsx("div",{className:"flex w-full items-center overflow-hidden rounded-md border border-primary/60",children:s.jsxs("div",{className:"flex w-full flex-col items-start p-4",children:[s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx("span",{className:"text-base font-medium text-primary",children:e.plan_id.charAt(0).toUpperCase()+e.plan_id.slice(1)}),s.jsxs("p",{className:"flex items-start gap-1 text-sm font-normal text-primary/60",children:[e.cancel_at_period_end===!0?s.jsx("span",{className:"flex h-[18px] items-center text-sm font-medium text-red-500",children:"Expires"}):s.jsx("span",{className:"flex h-[18px] items-center text-sm font-medium text-green-500",children:"Renews"}),"on:"," ",new Date(e.current_period_end*1e3).toLocaleDateString("en-US"),"."]})]}),s.jsx("p",{className:"text-start text-sm font-normal text-primary/60",children:k[m.PRO].description})]})})}),s.jsxs("div",{className:"flex min-h-14 w-full items-center justify-between rounded-lg rounded-t-none border-t border-border bg-secondary px-6 py-3 dark:bg-card",children:[s.jsx("p",{className:"text-sm font-normal text-primary/60",children:"You will not be charged for testing the subscription upgrade."}),e?.plan_id===m.FREE&&s.jsxs(P,{method:"POST",children:[s.jsx("input",{type:"hidden",name:"plan_id",value:t}),s.jsx("input",{type:"hidden",name:"planInterval",value:n}),s.jsx(C,{type:"submit",size:"sm",name:N.INTENT,value:N.SUBSCRIPTION_CREATE_CHECKOUT,disabled:t===m.FREE,children:"Upgrade to PRO"})]})]})]}),s.jsxs("div",{className:"flex w-full flex-col items-start rounded-lg border border-border bg-card",children:[s.jsxs("div",{className:"flex flex-col gap-2 p-6",children:[s.jsx("h2",{className:"text-xl font-medium text-primary",children:"Manage Subscription"}),s.jsx("p",{className:"flex items-start gap-1 text-sm font-normal text-primary/60",children:"Update your payment method, billing address, and more."})]}),s.jsxs("div",{className:"flex min-h-14 w-full items-center justify-between rounded-lg rounded-t-none border-t border-border bg-secondary px-6 py-3 dark:bg-card",children:[s.jsx("p",{className:"text-sm font-normal text-primary/60",children:"You will be redirected to the Stripe Customer Portal."}),s.jsx(P,{method:"POST",children:s.jsx(C,{type:"submit",size:"sm",name:N.INTENT,value:N.SUBSCRIPTION_CREATE_CUSTOMER_PORTAL,children:"Manage"})})]})]})]})}export{be as D,m as P,xe as R,_ as a,W as b,V as c,fe as d,Q as e,se as f,te as g,he as m,ee as u};
